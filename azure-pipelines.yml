# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

pool:
  vmImage: ubuntu-latest

steps:
  - task: DotNetCoreCLI@2
    inputs:
      command: 'build'
      projects: 'Sources/Microcharts.Droid/Microcharts.Droid.csproj'

  - task: DotNetCoreCLI@2
    inputs:
      command: 'pack'
      packagesToPack: 'NuGet/Microcharts.Core.nuspec'
      versioningScheme: 'off'

  - task: DotNetCoreCLI@2
    inputs:
      command: 'push'
      packagesToPush: '$(Build.ArtifactStagingDirectory)/*.nupkg'
      nuGetFeedType: 'internal'
      publishVstsFeed: 'e78193ab-d5a9-437a-b947-6a7096fe9790'